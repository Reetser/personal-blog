# ==========================================
# Skip protections if working locally
# ==========================================
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(localhost|127\.0\.0\.1) [NC]
RewriteRule .* - [L]
</IfModule>

# ==========================================
# Online protections: Block AI scrapers only
# ==========================================
<IfModule mod_rewrite.c>
RewriteEngine On

# Block AI / automated scrapers
RewriteCond %{HTTP_USER_AGENT} (GPTBot|ChatGPT-User|ClaudeBot|Amazonbot|CCBot|DataForSeoBot) [NC]
RewriteRule .* - [F,L]

# Prevent directory listing
Options -Indexes
</IfModule>

# ==========================================
# Security headers
# ==========================================
<IfModule mod_headers.c>
Header set X-Content-Type-Options "nosniff"
Header set X-Frame-Options "SAMEORIGIN"
Header set X-XSS-Protection "1; mode=block"
Header set Referrer-Policy "strict-origin-when-cross-origin"
Header set Permissions-Policy "geolocation=(), microphone=(), camera=()"
</IfModule>

# ==========================================
# Prevent access to sensitive files
# ==========================================
<FilesMatch "\.(env|htaccess|htpasswd|ini|log|sh|bak|config|json)$">
Require all denied
</FilesMatch>